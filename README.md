# linux_monitoring21

Проекты по основам мониторинга системы Linux, а также по сути введение в написание bash скриптов.

### Part 1

В первой части учимся как узнать системную информацию (HOSTNAME, TIMEZONE, USER, OS, DATE, UPTIME), сетевую информацию (IP, MASK, GATEWAY), информацию о дисковом пространстве и оперативной памяти. Оформлять вывод в консоль разными цветами в том числе с использованием файла конфигурации.

В последнем задании первой части выводится информация о каталоге, указанном в параметре:
 - Общее число папок, включая вложенные
 - Топ 5 папок с самым большим весом в порядке убывания (путь и размер)
 - Общее число файлов
 - Число конфигурационных файлов (с расширением .conf), текстовых файлов, исполняемых файлов, логов (файлов с расширением .log), архивов, символических ссылок
 - Топ 10 файлов с самым большим весом в порядке убывания (путь, размер и тип)
 - Топ 10 исполняемых файлов с самым большим весом в порядке убывания (путь, размер и хеш)
 - Время выполнения скрипта

Здесь, в добавление к изученому в предыдущих упражнениях, знакомимся с утилитами `sed` и `awk`.

### Part 2

Задания 1 и 2 - захламление файловой системы.

Первый скрипт запускается с 6 параметрами: 
 - абсолютный путь. 
 - количество вложенных папок. 
 - список букв английского алфавита, используемый в названии папок (не более 7 знаков). 
 - количество файлов в каждой созданной папке. 
 - список букв английского алфавита, используемый в имени файла и расширении (не более 7 знаков для имени, не более 3 знаков для расширения). 
 - размер файлов (в килобайтах, но не более 100).
Не совсем верно понял задание 1, поэтому, при малых файлах - до 100 кб, скрипт скорее всего остановится когда путь станет слишком длинным для файловой системы, а не при достижении 1 Гб свободного места в разделе /.
Создаётся лог файл с данными по всем созданным папкам и файлам (полный путь, дата создания, размер для файлов).

Второй скрипт запускается с 3 параметрами:
 - список букв английского алфавита, используемый в названии папок (не более 7 знаков). 
 - список букв английского алфавита, используемый в имени файла и расширении (не более 7 знаков для имени, не более 3 знаков для расширения). 
 - размер файла (в Мегабайтах, но не более 100).
При запуске скрипта, в различных (любых, кроме путей содержащих bin или sbin) местах файловой системы, создаются папки с файлами.
Количество вложенных папок - случайное число до 100. Количество файлов в каждой папке - случайное число до 100 (для каждой папки своё).
Скрипт останавливает работу, когда в файловой системе (в разделе /) остаёется 1 Гб свободного места. Поскольку, свободное место в файловой системе проверяется командой `df`, в файловой системе `zfs` скрипт будет работать пока место не кончится совсем.

Третий скрипт для очистки. Запускается с одним параметром:
 - `1` - очистка по лог файлу. Следующим шагом указывается относительный или абсолютный путь к логу, созданному скриптом из одного из предыдущих заданий;
 - `2` - очистка по дате и времени создания. Сначала выведет список всех файлов помеченных на удаление, чтобы не потерять лишнее. В закрытой файловой системе не работает;
 - `3` - очистка по маске имени (т.е. символы, нижнее подчёркивание и дата - %mask%_DDMMYY). Поскольку, все созданные файлы лежат по созданным же папкам, удаляются именно папки

В последующих двух заданиях симулируется бурная деятельность, результаты которой анализируются с помощью своего скрипта и GoAccess.

В двух последних заданиях мониторится состояние системы в целом - при использовании Prometheus и Grafana.

